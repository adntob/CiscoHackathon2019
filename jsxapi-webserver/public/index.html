<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>JS xAPI Call Demo</title>
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <div class="panel">
    JS xAPI demo
    <p/>
    <input class="number" placeholder="mrpresident@cisco.com" />
    <p/>
    <button class="call">Call</button>
  </div>
</body>

<script>
  function call() {
    const number = document.querySelector('.number').value;
    if (!number || !number.includes('@')) {
      alert('Enter URL to dial');
      return;
    }
    fetch('/call/' + number)
      .then(r => console.log('calling', r))
      .catch(e => console.error('error calling', e));
  }

  function init() {
    document.querySelector('.call').onclick = call;
  }

  window.onload = init;
</script>
</html>
